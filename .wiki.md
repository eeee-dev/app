# Project Summary
The Financial Management Dashboard for the ë Ecosystem is a sophisticated platform designed to streamline financial operations for businesses. It provides an array of tools for budget management, expense tracking, income reporting, and invoice processing, ensuring compliance with regulations such as Mauritius VAT. The dashboard leverages automation and advanced analytics to enhance operational efficiency, allowing users to make informed financial decisions while prioritizing accessibility and ease of deployment. Recent enhancements include a refined Income Category Breakdown System and an adaptable project-department structure for detailed financial oversight.

# Project Module Description
- **Dashboard**: Visual representation of key financial metrics and user activities, now integrated with real Supabase data.
- **Expenses**: Manages expenses with CRUD operations and VAT calculations; department and project fields are optional.
- **Income**: Tracks income through manual entries and invoice management, fully functional with Supabase; supports optional department and project fields, and includes category breakdowns.
- **Invoices**: Facilitates invoice creation and tracking, fully functional with Supabase.
- **Departments**: Manages department details and budget allocations, fully functional with Supabase.
- **Settings**: Configuration options for user preferences and notifications; team management requires Edge Function.
- **Reports**: Generates and analyzes financial reports, partially functional using localStorage.
- **Bank Statements**: Uploads and reconciles bank transactions, currently non-functional.
- **OCR Integration**: Real-time invoice scanning and data extraction.
- **Bulk Import**: Supports bulk importing of financial data, currently non-functional.
- **Notifications**: Alerts users about important updates.
- **Statistics**: Displays comprehensive financial analytics including revenue and expense trends, budget utilization, and department performance, fully functional with real Supabase data.
- **Projects**: Manages project details, budgets, and statuses, fully functional with Supabase; supports multiple departments.
- **Tax Return**: Utilizes stored `vat_amount` for accurate VAT calculations.
- **User Access**: Authentication for user access to the application.
- **Audit Trail**: Monitors system activities and user actions, currently using mock data.
- **Password Reset**: Secure password resets for users.
- **Login**: Enhanced branding with the ë logo and improved error handling.
- **Setup Script**: Automates setup, including database tables and category creation.
- **Database Setup**: SQL scripts for creating necessary tables and security policies.
- **Migration**: New migration scripts for adding project-department relationships and income category breakdowns, including a corrected migration for department_id type.

# Directory Tree
```
fresh-dashboard/
├── README.md                   # Project overview and setup instructions
├── DEPLOYMENT.md               # Deployment guide for the application
├── VERCEL_DEPLOYMENT_GUIDE.md  # Deployment guide for Vercel
├── components.json             # Component definitions
├── eslint.config.js            # ESLint configuration
├── index.html                  # Main HTML file
├── package.json                # Project dependencies and scripts
├── postcss.config.js           # PostCSS configuration
├── public/                     # Public assets
│   ├── assets/                 # Images and icons, including the ë logo
│   ├── favicon.svg             # Favicon for the application
│   └── uploads/                # Uploaded files and documents
├── src/                        # Source code
│   ├── App.css                 # Global styles
│   ├── App.tsx                 # Main application component with HashRouter
│   ├── components/             # Reusable UI components
│   ├── contexts/               # Context providers for state management
│   ├── hooks/                  # Custom hooks
│   ├── lib/                    # Utility functions and libraries
│   ├── pages/                  # Page components for routing
│   ├── services/               # Service layer for API interactions
│   ├── vite-env.d.ts           # Vite environment types
│   ├── config/                 # Configuration files
│   │   └── supabase-config.ts   # Supabase configuration for production
│   └── vite.config.ts          # Vite configuration
├── supabase-migrations/        # Database migration scripts
│   ├── migration-project-departments.sql # Migration for project-department relationships
│   ├── migration-income-categories.sql  # Migration for income categories
├── setup-database-manual.sql   # SQL script for manual database setup
├── final-setup.sql             # SQL script for creating all necessary tables and enabling security policies
├── database-setup-fixed.sql    # Updated SQL script with corrected syntax for database setup
├── database-setup-simple.sql    # New simplified SQL script
├── test_data_generator.cjs     # Script for generating test data
├── feature_test.cjs            # Script for testing application features
├── vercel.json                 # Vercel configuration for deployment
├── .vercelignore               # Files to ignore during Vercel deployment
├── setup-complete.mjs         # Script for automated setup process
├── CURRENT_ISSUES.md          # Troubleshooting guide for database issues and RLS policies
├── todo.md                    # Current tasks and issues to be addressed
├── install_database.py         # Python script for direct database installation via Supabase API
├── .env                       # Environment variables for Supabase configuration
├── ftp-upload.sh               # Script for uploading files to FTP server
├── deploy-to-subdirectory.sh    # Script for deploying to subdirectory
├── app-eeee-mu-deployment.tar.gz  # Compressed deployment file containing all necessary files
├── fix-database.sql           # Script to fix database schema issues
└── .htaccess                   # Configuration for handling 404 errors and client-side routing
```

# File Description Inventory
- **README.md**: Overview of the project and setup instructions.
- **DEPLOYMENT.md**: Instructions for deploying the application.
- **VERCEL_DEPLOYMENT_GUIDE.md**: Deployment instructions for Vercel.
- **package.json**: Lists dependencies, scripts, and project metadata.
- **index.html**: Entry point for the application.
- **src/**: Contains source code files, including components, pages, styles, and hooks.
- **public/**: Static assets such as images and favicon, including the ë logo.
- **uploads/**: Stores documents and files uploaded by users.
- **supabase-migrations/**: Contains SQL migration scripts for database changes, including the corrected migration for income categories.
- **setup-database-manual.sql**: SQL script for manual database setup.
- **final-setup.sql**: Script for creating all necessary tables and enabling security policies.
- **database-setup-fixed.sql**: Updated SQL script with corrected syntax for database setup.
- **database-setup-simple.sql**: Simplified SQL script to avoid syntax errors.
- **test_data_generator.cjs**: Generates sample data for testing purposes.
- **feature_test.cjs**: Automated testing script for application features.
- **vercel.json**: Configuration file for Vercel deployment.
- **.vercelignore**: Specifies files and directories to ignore during deployment.
- **setup-complete.mjs**: Script for automating the setup process of the application.
- **CURRENT_ISSUES.md**: Troubleshooting guide for database issues and RLS policies.
- **todo.md**: Current tasks and issues to be addressed.
- **install_database.py**: Python script for direct database installation via Supabase API.
- **.env**: Environment variables for Supabase configuration.
- **ftp-upload.sh**: Script for uploading files to the FTP server.
- **deploy-to-subdirectory.sh**: Script for deploying the application to a subdirectory.
- **app-eeee-mu-deployment.tar.gz**: Compressed deployment file containing all necessary files for the application.
- **fix-database.sql**: Script to fix database schema issues.
- **.htaccess**: Configuration file for handling 404 errors and ensuring proper routing.

# Technology Stack
- **Frontend**: React 19, TypeScript, Tailwind CSS
- **Backend**: Supabase (PostgreSQL)
- **Build Tool**: Vite 6
- **State Management**: React Query (TanStack Query)
- **Routing**: React Router v7 (now using HashRouter)
- **Form Handling**: React Hook Form
- **Charts**: Recharts
- **OCR**: Tesseract.js
- **Data Import**: Python (for parsing Excel files)

# Usage
1. **Install dependencies**: 
   ```bash
   pnpm install
   ```
2. **Configure Environment Variables**: Create a `.env` file in the project root with necessary Supabase credentials.
3. **Run SQL Migration**: 
   - Open the Supabase SQL Editor and run the migration scripts located at `/workspace/fresh-dashboard/migration-project-departments.sql`, `/workspace/fresh-dashboard/migration-income-categories.sql`, and optionally `/workspace/fresh-dashboard/seed-income-categories.sql`.
4. **Run Setup Script**: 
   ```bash
   node setup-complete.mjs
   ```
5. **Run Database Installation**: 
   ```bash
   python3 install_database.py
   ```
6. **Build for Production**: 
   ```bash
   pnpm run build
   ```
7. **Deploy the Application**: 
   - Download the `app-eeee-mu-deployment.tar.gz` file.
   - Extract it, and upload all contents from the `dist/` folder to your app's public_html directory.
8. **Run Development Server**: 
   ```bash
   pnpm run dev
   ```
