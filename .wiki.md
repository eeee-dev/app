# Project Summary
The Financial Management Dashboard for the ë Ecosystem is a comprehensive platform designed to optimize financial operations for businesses. It features budget management, expense tracking, income reporting, and invoice processing, ensuring compliance with regulations such as Mauritius VAT. By leveraging automation and data analytics, the dashboard enhances operational efficiency and supports informed decision-making. Recent updates include improved user authentication and streamlined team management features.

# Project Module Description
- **Dashboard**: Displays key financial metrics and user activities, integrated with Supabase data.
- **Expenses**: Manages expenses with CRUD operations and VAT calculations; includes optional department and project fields. Features real-time sync and bulk delete capabilities.
- **Income**: Tracks income through manual entries and invoice management, featuring category breakdowns. Includes real-time sync and bulk delete functionality.
- **Invoices**: Handles invoice creation and tracking, fully functional with Supabase.
- **Departments**: Maintains department details and budget allocations, fully functional with Supabase.
- **Settings**: Configuration options for user preferences and notifications; team management now uses a secure method for loading user data.
- **Reports**: Generates and analyzes financial reports, partially functional using localStorage.
- **Bank Statements**: Uploads and reconciles bank transactions, currently non-functional.
- **OCR Integration**: Real-time invoice scanning and data extraction.
- **Bulk Import**: Supports bulk importing of financial data, currently non-functional.
- **Notifications**: Alerts users about important updates.
- **Statistics**: Displays comprehensive financial analytics, fully functional with real Supabase data.
- **Projects**: Manages project details, budgets, and statuses, fully functional with Supabase; supports multiple departments.
- **Tax Return**: Utilizes stored `vat_amount` for accurate VAT calculations.
- **User Access**: Authentication for user access to the application.
- **Audit Trail**: Monitors system activities and user actions, currently using mock data.
- **Password Reset**: Secure password resets for users.
- **Login**: Enhanced branding with the ë logo and improved error handling.
- **Setup Script**: Automates setup, including database tables and category creation.
- **Database Setup**: SQL scripts for creating necessary tables and security policies.
- **Migration**: Updated migration scripts for income categories and project-department relationships, resolving schema conflicts.
- **Cleanup Script**: Removes existing income category tables and functions to prevent conflicts before migration.
- **Purchase Orders**: Manages purchase orders with enhanced deletion functionality, ensuring data consistency and improved UI feedback.
- **RLS Policies**: Ensures Row Level Security (RLS) policies are correctly configured for all tables.
- **Deployment**: Simplified deployment process with detailed instructions for FTP and Netlify, including a deployment package for ease of use.
- **Budgets**: Fully integrated with Supabase, allowing users to create, adjust, and delete budgets with real-time data loading and summary statistics.
- **GitHub Actions**: Automates deployment to FTP on code push, enhancing development workflow.

# Directory Tree
```
fresh-dashboard/
├── README.md                   # Project overview and setup instructions
├── README-DEPLOYMENT.md        # Auto-deployment setup guide using GitHub Actions
├── DEPLOYMENT.md               # Deployment guide for the application
├── VERCEL_DEPLOYMENT_GUIDE.md  # Deployment guide for Vercel
├── components.json             # Component definitions
├── eslint.config.js            # ESLint configuration
├── index.html                  # Main HTML file
├── package.json                # Project dependencies and scripts
├── postcss.config.js           # PostCSS configuration
├── public/                     # Public assets
│   ├── assets/                 # Images and icons, including the ë logo
│   ├── favicon.svg             # Favicon for the application
│   └── robots.txt              # Blocks search engine access
├── src/                        # Source code
│   ├── App.css                 # Global styles
│   ├── App.tsx                 # Main application component with HashRouter
│   ├── components/             # Reusable UI components
│   ├── contexts/               # Context providers for state management
│   ├── hooks/                  # Custom hooks
│   ├── lib/                    # Utility functions and libraries
│   ├── pages/                  # Page components for routing
│   ├── services/               # Service layer for API interactions
│   ├── vite-env.d.ts           # Vite environment types
│   ├── config/                 # Configuration files
│   │   └── supabase-config.ts   # Supabase configuration for production
│   └── vite.config.ts          # Vite configuration
├── supabase-migrations/        # Database migration scripts
│   ├── migration-income-categories-final.sql # Final migration for income categories
│   ├── migration-project-departments.sql # Migration for project-department relationships
│   ├── migration-income-categories-simple.sql # Simplified migration script
├── create-budgets-table.sql    # SQL script for creating budgets table
├── setup-database-manual.sql   # SQL script for manual database setup
├── final-setup.sql             # SQL script for creating all necessary tables and enabling security policies
├── database-setup-fixed.sql    # Updated SQL script with corrected syntax for database setup
├── database-setup-simple.sql    # New simplified SQL script
├── test_data_generator.cjs     # Script for generating test data
├── feature_test.cjs            # Script for testing application features
├── vercel.json                 # Vercel configuration for deployment
├── .vercelignore               # Files to ignore during Vercel deployment
├── setup-complete.mjs          # Script for automated setup process
├── CURRENT_ISSUES.md           # Troubleshooting guide for database issues and RLS policies
├── todo.md                     # Current tasks and issues to be addressed
├── install_database.py         # Python script for direct database installation via Supabase API
├── .env                        # Environment variables for Supabase configuration
├── ftp-upload.sh               # Script for uploading files to FTP server
├── deploy-to-subdirectory.sh    # Script for deploying to subdirectory
├── dist-deployment.tar.gz      # Compressed deployment package containing all necessary files
├── fix-database.sql           # Script to fix database schema issues
├── verify-rls-policies.sql     # SQL script for verifying and fixing RLS policies
└── .github/
    └── workflows/
        ├── deploy.yml          # GitHub Actions workflow for automatic deployment
        └── README.md           # Documentation for GitHub workflows
```

# File Description Inventory
- **README.md**: Overview of the project and setup instructions.
- **README-DEPLOYMENT.md**: Guide for setting up automatic deployment using GitHub Actions.
- **DEPLOYMENT.md**: Instructions for deploying the application.
- **VERCEL_DEPLOYMENT_GUIDE.md**: Deployment instructions for Vercel.
- **package.json**: Lists dependencies, scripts, and project metadata.
- **index.html**: Entry point for the application.
- **src/**: Contains source code files, including components, pages, styles, and hooks.
- **public/**: Static assets such as images and favicon, including the ë logo.
- **supabase-migrations/**: Contains SQL migration scripts for database changes, including the final migration script.
- **create-budgets-table.sql**: SQL script for creating the budgets table with necessary indexes and RLS policies.
- **setup-database-manual.sql**: SQL script for manual database setup.
- **final-setup.sql**: Script for creating all necessary tables and enabling security policies.
- **database-setup-fixed.sql**: Updated SQL script with corrected syntax for database setup.
- **database-setup-simple.sql**: Simplified SQL script to avoid syntax errors.
- **test_data_generator.cjs**: Generates sample data for testing purposes.
- **feature_test.cjs**: Automated testing script for application features.
- **vercel.json**: Configuration file for Vercel deployment, including SPA routing and no-cache headers.
- **.vercelignore**: Specifies files and directories to ignore during deployment.
- **setup-complete.mjs**: Script for automating the setup process of the application.
- **CURRENT_ISSUES.md**: Troubleshooting guide for database issues and RLS policies.
- **todo.md**: Current tasks and issues to be addressed.
- **install_database.py**: Python script for direct database installation via Supabase API.
- **.env**: Environment variables for Supabase configuration.
- **ftp-upload.sh**: Script for uploading files to the FTP server.
- **deploy-to-subdirectory.sh**: Script for deploying the application to a subdirectory.
- **dist-deployment.tar.gz**: Compressed deployment package containing all necessary files for the application.
- **fix-database.sql**: Script to fix database schema issues.
- **verify-rls-policies.sql**: SQL script for verifying and fixing Row Level Security policies.
- **.github/**: Contains GitHub Actions workflows for automated deployment.

# Technology Stack
- **Frontend**: React 19, TypeScript, Tailwind CSS
- **Backend**: Supabase (PostgreSQL)
- **Build Tool**: Vite 6
- **State Management**: React Query (TanStack Query)
- **Routing**: React Router v7 (now using HashRouter)
- **Form Handling**: React Hook Form
- **Charts**: Recharts
- **OCR**: Tesseract.js
- **Data Import**: Python (for parsing Excel files)

# Usage
1. **Install dependencies**: 
   ```bash
   pnpm install
   ```
2. **Configure Environment Variables**: Create a `.env` file in the project root with necessary Supabase credentials.
3. **Run Cleanup Script**: 
   - Open the Supabase SQL Editor and run the cleanup script located at `cleanup-income-categories.sql`.
4. **Run SQL Migration**: 
   - Open the Supabase SQL Editor and run the migration script located at `supabase-migrations/migration-income-categories-final.sql`.
5. **Run Setup Script**: 
   ```bash
   node setup-complete.mjs
   ```
6. **Run Database Installation**: 
   ```bash
   python3 install_database.py
   ```
7. **Build for Production**: 
   ```bash
   pnpm run build
   ```
8. **Deploy the Application**: 
   - Use the `dist-deployment.tar.gz` file. Upload and extract its contents to your app's public_html directory.
9. **Run Development Server**: 
   ```bash
   pnpm run dev
   ```
10. **Set Up GitHub Actions**: 
    - Push your code to GitHub and configure GitHub Secrets for automatic deployment.
