# Financial Dashboard - Product Requirement Document (PRD)

## 1. Language & Project Information

**Language:** English  
**Programming Language:** TypeScript, React, Shadcn-ui, Tailwind CSS  
**Project Name:** financial_dashboard  
**Current Status:** Application deployed at https://e-office.mgx.world/  
**Backend Service:** Supabase (Already integrated)

**Original Requirements Summary:**
The financial dashboard application requires completion of several key features to provide comprehensive financial management capabilities:
1. Project management system under departments
2. Income tracking with project/department classification
3. Client information management
4. Form validation improvements
5. Database schema updates for new entities

## 2. Product Definition

### 2.1 Product Goals

**Goal 1: Comprehensive Financial Management**
- Provide end-to-end financial tracking across departments, projects, and clients
- Enable real-time budget monitoring and expense classification
- Support multi-level financial reporting (department, project, client)

**Goal 2: Operational Efficiency**
- Streamline expense approval workflows
- Automate income tracking and reconciliation
- Reduce manual data entry through intelligent form validation

**Goal 3: Data-Driven Decision Making**
- Provide actionable financial insights through analytics
- Enable predictive budgeting based on historical data
- Support strategic planning with comprehensive reporting

### 2.2 User Stories

**As a Finance Manager, I want to:**
1. Track income and expenses by department and project so that I can monitor budget utilization
2. Manage client information and payment history so that I can maintain client relationships
3. Generate comprehensive financial reports so that I can make data-driven decisions
4. Approve or reject expenses with project classification so that I can control departmental spending
5. View real-time financial dashboards so that I can monitor organizational financial health

**As a Department Head, I want to:**
1. Create and manage projects under my department so that I can track project-specific finances
2. View my department's budget utilization across all projects so that I can manage resources effectively
3. Submit expenses with proper project classification so that I can maintain accurate project costing
4. Track income generated by my department's projects so that I can measure department performance

**As a Project Manager, I want to:**
1. Track all expenses and income for my specific project so that I can stay within budget
2. View project financial health metrics so that I can make informed project decisions
3. Assign expenses to specific project phases so that I can track cost allocation
4. Generate project-specific financial reports so that I can report to stakeholders

**As an Accountant, I want to:**
1. Have robust form validation for all financial entries so that I can ensure data accuracy
2. Reconcile bank statements with recorded transactions so that I can maintain accurate books
3. Manage client invoicing and payment tracking so that I can ensure timely collections
4. Export financial data in multiple formats so that I can prepare tax returns

### 2.3 Competitive Analysis

**1. QuickBooks Online**
- **Pros:** Comprehensive feature set, strong reporting, extensive integrations
- **Cons:** Expensive, complex interface, steep learning curve
- **Target Market:** Small to medium businesses

**2. Xero**
- **Pros:** User-friendly interface, strong bank reconciliation, good mobile app
- **Cons:** Limited customization, higher cost for advanced features
- **Target Market:** Small businesses, accountants

**3. FreshBooks**
- **Pros:** Excellent invoicing, time tracking, client management
- **Cons:** Limited expense management, weaker reporting
- **Target Market:** Freelancers, service-based businesses

**4. Wave Accounting**
- **Pros:** Free for basic features, good invoicing, receipt scanning
- **Cons:** Limited features, basic reporting, no project tracking
- **Target Market:** Very small businesses, freelancers

**5. Zoho Books**
- **Pros:** Affordable, good integration with Zoho ecosystem, strong automation
- **Cons:** Limited customization, basic project management
- **Target Market:** Small businesses using Zoho products

**6. Sage Intacct**
- **Pros:** Enterprise-grade features, strong multi-entity support, excellent reporting
- **Cons:** Very expensive, complex implementation, requires training
- **Target Market:** Medium to large enterprises

**7. NetSuite**
- **Pros:** Comprehensive ERP features, strong financial management, scalable
- **Cons:** Extremely expensive, complex, requires dedicated implementation team
- **Target Market:** Large enterprises

### 2.4 Competitive Quadrant Chart

```mermaid
quadrantChart
    title "Financial Management Software Competitive Analysis"
    x-axis "Basic Features" --> "Advanced Features"
    y-axis "Low Cost" --> "High Cost"
    quadrant-1 "Value Leaders"
    quadrant-2 "Premium Solutions"
    quadrant-3 "Budget Options"
    quadrant-4 "Overpriced"
    "QuickBooks Online": [0.8, 0.7]
    "Xero": [0.7, 0.6]
    "FreshBooks": [0.6, 0.5]
    "Wave Accounting": [0.4, 0.2]
    "Zoho Books": [0.5, 0.3]
    "Sage Intacct": [0.9, 0.9]
    "NetSuite": [1.0, 1.0]
    "Our Financial Dashboard": [0.7, 0.4]
```

## 3. Technical Specifications

### 3.1 Requirements Analysis

**Current Implementation Status:**
✅ Dashboard with real-time financial overview  
✅ Expense management with basic project selection  
✅ Department management  
✅ Bank statement upload and matching  
✅ Invoice creation and management  
✅ Basic income tracking (needs enhancement)  
❌ Project management under departments (partially implemented)  
❌ Comprehensive client information management  
❌ Advanced form validation  
❌ Database schema for new entities  

**Technical Stack:**
- Frontend: React, TypeScript, Shadcn-ui, Tailwind CSS
- Backend: Supabase (PostgreSQL)
- Authentication: Supabase Auth
- File Storage: Supabase Storage
- Deployment: MGX Platform

### 3.2 Requirements Pool

**P0 - Must Have (Critical for MVP):**
1. **Project Management System**
   - Create, edit, delete projects under departments
   - Project budget allocation and tracking
   - Project status management (active, completed, on-hold)
   - Team assignment to projects

2. **Enhanced Income Tracking**
   - Income classification by department and project
   - Client association with income entries
   - Payment status tracking (paid, pending, overdue)
   - Recurring income management

3. **Client Information Management**
   - Client profile creation and management
   - Contact information storage
   - Payment history tracking
   - Client-specific notes and documents

4. **Form Validation Improvements**
   - Real-time validation for all financial forms
   - Required field validation
   - Data format validation (dates, amounts, emails)
   - Duplicate entry prevention

5. **Database Schema Updates**
   - Projects table with department relationships
   - Clients table with contact information
   - Enhanced income table with project/client relationships
   - Audit trail for all financial transactions

**P1 - Should Have (Important for user experience):**
1. **Advanced Reporting**
   - Custom report builder
   - Export to multiple formats (PDF, Excel, CSV)
   - Scheduled report generation
   - Report templates

2. **Workflow Automation**
   - Approval workflows for expenses
   - Automated payment reminders
   - Recurring transaction scheduling
   - Budget alert notifications

3. **Integration Enhancements**
   - Bank API integration for automatic transaction import
   - Email integration for invoice delivery
   - Calendar integration for payment due dates
   - Document scanning for receipts

4. **Mobile Responsiveness**
   - Full mobile compatibility
   - Touch-friendly interfaces
   - Offline data entry capability
   - Mobile notifications

**P2 - Nice to Have (Future enhancements):**
1. **Predictive Analytics**
   - Budget forecasting based on historical data
   - Cash flow prediction
   - Expense trend analysis
   - Revenue projection

2. **Multi-currency Support**
   - Support for multiple currencies
   - Automatic currency conversion
   - Exchange rate tracking
   - Multi-currency reporting

3. **Advanced Security**
   - Role-based access control (RBAC)
   - Two-factor authentication
   - Audit logging
   - Data encryption at rest

4. **API and Webhooks**
   - REST API for third-party integration
   - Webhook support for event notifications
   - Zapier/IFTTT integration
   - Custom integration framework

### 3.3 UI Design Draft

**Dashboard Layout:**
```
┌─────────────────────────────────────────────────────────────┐
│  Header: Logo, User Menu, Notifications, Date Display       │
├─────────────────────────────────────────────────────────────┤
│  Navigation:                                                │
│  ┌─────────────┐  ┌───────────────────────────────────────┐ │
│  │             │ │  Main Content Area                    │ │
│  │  Sidebar    │ │                                       │ │
│  │             │ │  • Financial Overview Cards           │ │
│  │  • Dashboard│ │  • Department Budget Utilization      │ │
│  │  • Expenses │ │  • Recent Transactions                │ │
│  │  • Income   │ │  • Project Status                    │ │
│  │  • Projects │ │  • Client Overview                   │ │
│  │  • Clients  │ │  • Quick Actions                     │ │
│  │  • Reports  │ │                                       │ │
│  │  • Settings │ │                                       │ │
│   └─────────────┘ └───────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

**Project Management Interface:**
- Project list view with filtering and sorting
- Project detail view with financial summary
- Gantt chart for project timeline visualization
- Team assignment interface
- Budget tracking dashboard per project

**Client Management Interface:**
- Client directory with search and filtering
- Client profile view with contact information
- Transaction history for each client
- Document management for client files
- Communication history tracking

**Enhanced Form Design:**
- Step-by-step wizards for complex forms
- Real-time validation feedback
- Auto-save functionality
- Duplicate detection alerts
- Required field indicators

### 3.4 Database Schema Updates

**New Tables Required:**

1. **Projects Table:**
```sql
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    code VARCHAR(50) UNIQUE NOT NULL,
    description TEXT,
    department_id UUID REFERENCES departments(id) ON DELETE CASCADE,
    budget DECIMAL(15,2) DEFAULT 0,
    spent DECIMAL(15,2) DEFAULT 0,
    start_date DATE,
    end_date DATE,
    status VARCHAR(50) DEFAULT 'active',
    manager_id UUID REFERENCES auth.users(id),
    team_size INTEGER DEFAULT 1,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

2. **Clients Table:**
```sql
CREATE TABLE clients (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255),
    phone VARCHAR(50),
    address TEXT,
    company_name VARCHAR(255),
    tax_id VARCHAR(100),
    payment_terms VARCHAR(100),
    notes TEXT,
    status VARCHAR(50) DEFAULT 'active',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

3. **Enhanced Income Table:**
```sql
CREATE TABLE income (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    invoice_number VARCHAR(100) UNIQUE,
    client_id UUID REFERENCES clients(id),
    project_id UUID REFERENCES projects(id),
    department_id UUID REFERENCES departments(id),
    amount DECIMAL(15,2) NOT NULL,
    description TEXT,
    category VARCHAR(100),
    date DATE NOT NULL,
    due_date DATE,
    status VARCHAR(50) DEFAULT 'pending',
    payment_method VARCHAR(50),
    payment_date DATE,
    receipt_url TEXT,
    created_by UUID REFERENCES auth.users(id),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

4. **Project Team Members Table:**
```sql
CREATE TABLE project_team_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    user_id UUID REFERENCES auth.users(id),
    role VARCHAR(100),
    hourly_rate DECIMAL(10,2),
    start_date DATE,
    end_date DATE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

**Existing Tables to Modify:**

1. **Expenses Table - Add project relationship:**
```sql
ALTER TABLE expenses ADD COLUMN IF NOT EXISTS project_id UUID REFERENCES projects(id);
```

2. **Departments Table - Add project count:**
```sql
ALTER TABLE departments ADD COLUMN IF NOT EXISTS project_count INTEGER DEFAULT 0;
```

### 3.5 API Endpoints Required

**Project Management:**
- `GET /api/projects` - List all projects with filters
- `POST /api/projects` - Create new project
- `GET /api/projects/:id` - Get project details
- `PUT /api/projects/:id` - Update project
- `DELETE /api/projects/:id` - Delete project
- `GET /api/departments/:id/projects` - Get projects by department

**Client Management:**
- `GET /api/clients` - List all clients
- `POST /api/clients` - Create new client
- `GET /api/clients/:id` - Get client details
- `PUT /api/clients/:id` - Update client
- `DELETE /api/clients/:id` - Delete client
- `GET /api/clients/:id/transactions` - Get client transaction history

**Enhanced Income Management:**
- `GET /api/income` - List income with project/client filters
- `POST /api/income` - Create income entry
- `PUT /api/income/:id` - Update income entry
- `DELETE /api/income/:id` - Delete income entry
- `GET /api/income/summary` - Get income summary by period

**Reporting:**
- `GET /api/reports/financial-summary` - Financial summary report
- `GET /api/reports/project-performance` - Project performance report
- `GET /api/reports/client-analysis` - Client analysis report
- `POST /api/reports/custom` - Generate custom report

### 3.6 Form Validation Requirements

**Expense Form Validation:**
- Amount: Positive number, maximum 2 decimal places
- Date: Valid date, not in future for expenses
- Department: Required selection
- Project: Optional, but must belong to selected department
- Category: Required selection from predefined list
- Description: Required, minimum 10 characters
- Receipt: Optional, but must be valid URL if provided

**Income Form Validation:**
- Amount: Positive number, maximum 2 decimal places
- Date: Valid date
- Client: Required selection or new client creation
- Project: Optional, but must belong to selected department
- Invoice Number: Unique, format validation
- Due Date: Must be after invoice date if provided
- Payment Method: Required when marking as paid

**Project Form Validation:**
- Name: Required, unique within department
- Code: Required, unique, alphanumeric with hyphens
- Budget: Positive number, maximum 2 decimal places
- Start Date: Required, valid date
- End Date: Optional, but must be after start date if provided
- Department: Required selection
- Manager: Required selection from users

**Client Form Validation:**
- Name: Required
- Email: Optional, but must be valid format if provided
- Phone: Optional, but must be valid format if provided
- Company Name: Optional
- Tax ID: Optional, format validation based on country

### 3.7 Security Requirements

**Authentication & Authorization:**
- Role-based access control (RBAC)
- Department-level data isolation
- Project-level permissions
- Audit trail for all financial transactions

**Data Protection:**
- Encryption of sensitive financial data
- Secure file upload for receipts and documents
- Regular data backups
- Data retention policies

**Compliance:**
- GDPR compliance for client data
- Financial data privacy
- Audit trail requirements
- Data export capabilities

### 3.8 Performance Requirements

**Response Times:**
- Dashboard load: < 2 seconds
- Form submission: < 1 second
- Report generation: < 5 seconds for standard reports
- Search operations: < 500 milliseconds

**Scalability:**
- Support for up to 100 concurrent users
- Handle up to 10,000 transactions per month
- Support for multiple departments and projects
- Efficient database indexing for large datasets

**Availability:**
- 99.5% uptime requirement
- Automated backup and recovery
- Monitoring and alerting
- Disaster recovery plan

### 3.9 Open Questions

1. **Integration Scope:**
   - Should we integrate with external accounting software?
   - What level of bank integration is required?
   - Are there specific compliance requirements for the industry?

2. **Reporting Requirements:**
   - What are the mandatory financial reports?
   - Are there specific regulatory reporting requirements?
   - What level of customization is needed for reports?

3. **User Management:**
   - How many user roles are needed?
   - What are the permission levels for each role?
   - How should department and project access be managed?

4. **Data Migration:**
   - Is there existing data to migrate?
   - What is the volume of historical data?
   - Are there data quality issues to address?

5. **Future Roadmap:**
   - What are the priority features for future releases?
   - Are there specific integrations planned?
   - What is the timeline for additional features?

## 4. Success Metrics

### 4.1 Key Performance Indicators (KPIs)

**User Adoption:**
- Number of active users per month
- User retention rate
- Feature adoption rate
- User satisfaction score (NPS)

**Operational Efficiency:**
- Reduction in manual data entry time
- Decrease in financial reporting time
- Improvement in budget accuracy
- Reduction in overdue payments

**Financial Performance:**
- Improvement in budget utilization
- Reduction in unauthorized expenses
- Increase in on-time payments
- Improvement in cash flow management

**Technical Performance:**
- System uptime percentage
- Average response time
- Error rate
- Data accuracy rate

### 4.2 Acceptance Criteria

**Project Management:**
- Users can create projects under departments
- Projects can be assigned budgets and teams
- Project financials are tracked separately
- Project status can be updated

**Income Tracking:**
- Income can be classified by department and project
- Clients can be associated with income entries
- Payment status is tracked accurately
- Recurring income can be managed

**Client Management:**
- Client profiles can be created and managed
- Contact information is stored securely
- Payment history is tracked
- Documents can be attached to clients

**Form Validation:**
- All forms have real-time validation
- Required fields are properly validated
- Data format validation works correctly
- Duplicate entry prevention is effective

**Database Schema:**
- New tables are created successfully
- Relationships between tables work correctly
- Data integrity is maintained
- Performance is not degraded

## 5. Implementation Timeline

### Phase 1: Core Features (2-3 weeks)
1. Database schema implementation
2. Project management system
3. Enhanced income tracking
4. Basic client management

### Phase 2: Enhanced Features (1-2 weeks)
1. Advanced form validation
2. Improved user interface
3. Basic reporting
4. Performance optimization

### Phase 3: Advanced Features (1-2 weeks)
1. Advanced reporting
2. Workflow automation
3. Integration enhancements
4. Security improvements

### Phase 4: Testing & Deployment (1 week)
1. User acceptance testing
2. Performance testing
3. Security testing
4. Production deployment

## 6. Risk Assessment

### Technical Risks:
- Database performance with large datasets
- Integration with existing systems
- Data migration challenges
- Security vulnerabilities

### Business Risks:
- User adoption resistance
- Training requirements
- Change management
- Regulatory compliance

### Mitigation Strategies:
- Phased implementation approach
- Comprehensive testing
- User training and support
- Regular security audits

## 7. Conclusion

This PRD outlines the comprehensive requirements for completing the financial dashboard application. The focus is on delivering a robust, user-friendly system that meets the needs of finance managers, department heads, project managers, and accountants. By implementing these features, the organization will gain better financial visibility, improved operational efficiency, and enhanced decision-making capabilities.

The proposed solution leverages the existing technology stack while adding the necessary components to create a complete financial management system. The phased implementation approach ensures that critical features are delivered first, followed by enhancements that provide additional value.

**Next Steps:**
1. Review and approve this PRD
2. Begin Phase 1 implementation
3. Conduct regular progress reviews
4. Gather user feedback for continuous improvement

---
*Document Version: 1.0*  
*Last Updated: December 16, 2025*  
*Author: Emma, Product Manager*  
*Status: Draft for Review*